{% import "macros.html" as macros %}
{% set tr = load_data(path="translations/" ~ lang ~ ".yml") %}

{% block global_vars %}
{% endblock global_vars %}

<!DOCTYPE html>
<html lang="{{lang}}">

<head>
  {% block prepend_head %}
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
  {% endblock prepend_head %}

  {% block metas %}
    {% if config.description %}
      <meta name="description" content="{% block description %}{{ config.description }}{% endblock %}">
    {% endif %}
    {% if config.author %}
      <meta name="author" content="{{ config.extra.author }}">
    {% endif %}
  {% endblock metas %}

  {% block custom_meta %}
    {% if config.extra.meta %}
      {% for meta in config.extra.meta %}
        <meta{% for key, value in meta %} {{ key }}="{{ value | safe }}"{% endfor %}>
      {% endfor %}
    {% endif %}
  {% endblock custom_meta %}

  <title>
    {%- block title -%}
      {{ config.title }}
    {%- endblock title -%}
  </title>

  {% block links %}
    {% if config.extra.manifest %}
      <link href='{{ config.extra.manifest }}' rel="manifest">
    {% endif %}
    {% for size, icon in config.extra.favicons %}
      <link href='{{ icon }}' rel="icon" sizes="{{ size }}" type="image/{{ icon | split(pat='.') | last }}">
    {% endfor %}
  {% endblock links %}

  {% block styles %}
    {% set styles = load_data(path="styles.yml", required=false) %}
    {% if styles %}
      {% for style, attrs in styles %}
        <link rel="stylesheet" {%- for key, value in attrs %} {{ key }}="{{ value | safe }}"{% endfor %}>
      {% endfor %}
    {% endif %}
  {% endblock styles %}

  {% block scripts %}
    {% set scripts = load_data(path="scripts.yml", required=false) %}
    {% if scripts %}
      {% for script, attrs in scripts %}
        <script{%- for key, value in attrs %} {{ key }}="{{ value | safe }}"{% endfor %}>
      {% endfor %}
    {% endif %}
  {% endblock scripts %}

  {% block append_head %}
  {% endblock append_head %}
</head>

<body>
  {% block prepend_body %}
  {% endblock prepend_body %}

  <header>
  {% block prepend_header %}
    <a href="{{ root.permalink }}">
  {% endblock prepend_header %}
  {% block header %}
      {% if config.extra.logo %}
        <img class="site-logo" src="{{ config.extra.logo }}" alt="Logo">
      {% endif %}
      {% if config.title %}
        <h1 class="site-title">{{ config.title }}</h1>
      {% endif %}
  {% endblock header %}
  {% block append_header %}
    </a>
  {% endblock append_header %}
  </header>

  <nav aria-label="navigation menu">
    {% block prepend_nav %}
    {% endblock prepend_nav %}
    <ul>
    {% block main_nav %}
    {% endblock main_nav %}
    </ul>
    {% block actions %}
      {#<section class="actions">
        {% if translations %}
          <button id="lang-select" aria-label="Choose language">
            <i class="fa-solid fas fa-language"></i>
          </button>
        {% endif %}
        <button id="nav-search" aria-label="Start search" data-target="#search-modal">
          <i class="fas fa-search"></i>
        </button>
        <button id="theme-switch" aria-label="Switch theme">
          <i class="fas fa-adjust"></i>
        </button>
      </section>#}
    {% endblock actions %}
    {% block append_nav %}
    {% endblock append_nav %}
  </nav>

  {% block content %}
  {% endblock %}

  {% block footer %}
    {% if config.extra.author %}
      <footer>
        <p class="copyright">© {{ now() | date(format="%Y") }} {{ config.extra.author }}</p>
      </footer>
    {% elif config.title %}
      <footer>
        <p class="copyright">© {{ now() | date(format="%Y") }} {{ config.title }}</p>
      </footer>
    {% endif %}
    {{ macros::social_links(nets=config.extra.networks) }}
  {% endblock footer %}

  {% block append_body %}
  {% endblock append_body %}
</body>
</html>
