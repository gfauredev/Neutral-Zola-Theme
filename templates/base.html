{% import "macros.html" as lib %}
{# Retreive configuration variables #}
{% block config %}
{% endblock config %}
{# Retreive site index with proper language #}
{% if lang == config.default_language %}
  {% set index = get_section(path="_index.md", metadata_only=true) %}
{% else %}
  {% set index = get_section(path="_index."~lang~".md", metadata_only=true) %}
{% endif %}
{# Retreive template translations #}
{% set i18n_data = load_data(path="data/i18n.yml", required=false) %}
{% if not i18n_data %}
  {% set i18n_data = load_data(path=config.extra.path~"/data/i18n.yml") %}
{% endif %}
{% set i18n = i18n_data[lang] %}
{# Retreive predefined icons #}
{% set icons = load_data(path="data/icon.yml", required=false) %}
{% if not icons %}
  {% set icons = load_data(path=config.extra.path~"/data/icon.yml") %}
{% endif %}
{# Set fallback description #}
{% if not description %}
  {% set description = config.description %}
{% endif %}
{# The actual page #}
<!DOCTYPE html>
<html lang="{{ lang }}">
  <head>
    <head>{% include "head.html" %}</head>
  </head>
  <body id="top">
    {% block body_prepend %}
    {% endblock body_prepend %}
    <header>
      {% include "header.html" %}
    </header>
    {#<nav aria-label="{{ i18n.nav }}">{% include "header.html" %}</nav>#}
    <main>
      {% block main %}
      {% endblock main %}
    </main>
    <footer>
      {% include "footer.html" %}
    </footer>
    {{ lib::return_top(label=i18n.return_top) }}
    {% block body_append %}
    {% endblock body_append %}
  </body>
</html>
